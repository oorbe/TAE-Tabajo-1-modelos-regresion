---
title: "Analisis_Datos"
author: 
- "Daniel Ceballos Monsalve"
- "Daniel Hoyos Gonzalez"
- "Andrés Felipe Mejía Quintero"
- "Doris Steffania Obando Gonzalez"

output:
  html_document:
    toc: true
    toc_depth: 5
    theme: united
    
---


```{r message=FALSE, warning=FALSE, paged.print=TRUE}
library(dplyr)

```

Los datos se tomaron de la pagina:

http://microdatos.dane.gov.co/index.php/catalog/678/get_microdata

## Lectura de los datos 

### Dataframe caracteristicas y composición del hogar:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de caracteristicas y composición del hogar

Caracteristicas_composicion_hogar<- read.csv2("Datos/Caracteristicas y composicion del hogar.csv")

#Se selecciona las variables que se consideran importantes de dataframe

dataFrame1<-select(Caracteristicas_composicion_hogar,ï..DIRECTORIO,P6040,P6051,P6087,P6088,P1895,P2057)

#Eliminando el dataframe original de caracteristicas y composición del hogar
rm(Caracteristicas_composicion_hogar)

#Se renombran las variables

dataFrame1<-rename(dataFrame1,Directorio=ï..DIRECTORIO,Edad=P6040,Parentesco_Jefe_Hogar=P6051,Escolaridad_Padre=P6087,Escolaridad_Madre=P6088,Nivel_Satisfaccion=P1895,Campesino=P2057)

#Se eliminan los NA
dataFrame1 <- dataFrame1[!is.na(dataFrame1$Directorio),]
dataFrame1 <- dataFrame1[!is.na(dataFrame1$Edad),]
dataFrame1 <- dataFrame1[!is.na(dataFrame1$Parentesco_Jefe_Hogar),]
dataFrame1 <- dataFrame1[!is.na(dataFrame1$Escolaridad_Padre),]
dataFrame1 <- dataFrame1[!is.na(dataFrame1$Escolaridad_Madre),]
dataFrame1 <- dataFrame1[!is.na(dataFrame1$Nivel_Satisfaccion),]
dataFrame1 <- dataFrame1[!is.na(dataFrame1$Campesino),]

#Se categoriza las variables
cols <- c("Directorio","Edad","Parentesco_Jefe_Hogar","Escolaridad_Padre","Escolaridad_Madre","Nivel_Satisfaccion","Campesino")
dataFrame1[cols] <- lapply(dataFrame1[cols], as.factor)
rm(cols)
```

### Dataframe datos de la vivienda:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de condiciones de datos de la vivienda

Datos_Vivienda<- read.csv2("Datos/Datos de la vivienda.csv")

#Se selecciona las variables que se consideran importantes de dataframe

dataFrame2<-select(Datos_Vivienda,ï..DIRECTORIO,P1_DEPARTAMENTO,CANT_HOGARES_VIVIENDA,CLASE,P1070,P4005,P8520S1,P8520S1A1,P8520S5,P8520S3,P8520S4)

#Eliminando el dataframe original de datos de la vivienda
rm(Datos_Vivienda)

#Se renombran las variables

dataFrame2<-rename(dataFrame2,Directorio=ï..DIRECTORIO,Departamento_Residencia=P1_DEPARTAMENTO,Cantidad_Hogares_Vivienda=CANT_HOGARES_VIVIENDA,Clase_Vivienda=CLASE,Tipo_Vivienda=P1070,Material_Vivienda=P4005,Energia_Vivienda=P8520S1,Estrato_Energia_Vivienda=P8520S1A1,Servicio_Acueducto=P8520S5,Servicio_Alcantarillado=P8520S3,Servicio_Recoleccion_Basuras=P8520S4)

#Se eliminan los NA
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Directorio),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Departamento_Residencia),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Cantidad_Hogares_Vivienda),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Clase_Vivienda),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Tipo_Vivienda),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Material_Vivienda),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Energia_Vivienda),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Estrato_Energia_Vivienda),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Servicio_Acueducto),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Servicio_Alcantarillado),]
dataFrame2 <- dataFrame2[!is.na(dataFrame2$Servicio_Recoleccion_Basuras),]

dataFrame2 <- mutate(dataFrame2, Id = c(1:nrow(dataFrame2)))

#Se crean categorias para los servicios publicos
dataFrame2<-dataFrame2%>%
  mutate(Energia_Vivienda=case_when
         ((dataFrame2$Energia_Vivienda==1)~1,
         (dataFrame2$Energia_Vivienda!=1)~0),
         Servicio_Acueducto=case_when
         ((dataFrame2$Servicio_Acueducto==1)~1,
         (dataFrame2$Servicio_Acueducto!=1)~0),
         Servicio_Alcantarillado=case_when
         ((dataFrame2$Servicio_Alcantarillado==1)~1,
         (dataFrame2$Servicio_Alcantarillado!=1)~0),
         Servicio_Recoleccion_Basuras=case_when
         ((dataFrame2$Servicio_Recoleccion_Basuras==1)~1,
          (dataFrame2$Servicio_Recoleccion_Basuras!=1)~0)
         )

#Se cuenta la cantidad de servicios publicos con los  que cuentan
df_dates1 <- dataFrame2 %>%
  group_by(Id) %>%
  summarise(total_Servicios= Energia_Vivienda + Servicio_Acueducto + Servicio_Alcantarillado + Servicio_Recoleccion_Basuras)

dataFrame2<-merge (dataFrame2, df_dates1, by = "Id")
rm(df_dates1)

#Se crean categorias para cada uno de los casos
dataFrame2 <- dataFrame2 %>%
  mutate(Servicios_Publicos=case_when
         ((dataFrame2$Energia_Vivienda==1 & dataFrame2$total_Servicios==1)~1,
           (dataFrame2$Servicio_Acueducto==1 & dataFrame2$total_Servicios==1)~2,
           (dataFrame2$Servicio_Alcantarillado==1 & dataFrame2$total_Servicios==1)~3,
           (dataFrame2$Servicio_Recoleccion_Basuras==1 & dataFrame2$total_Servicios==1)~4,
           (dataFrame2$total_Servicios==0)~0,
           (dataFrame2$total_Servicios==2)~5,
           (dataFrame2$total_Servicios==3)~6,
           (dataFrame2$total_Servicios==4)~7))

#Se eliminan las columnas innecesarias
cols_remove<-c("Id","Energia_Vivienda","Servicio_Acueducto","Servicio_Alcantarillado","Servicio_Recoleccion_Basuras","total_Servicios")
dataFrame2 <- dataFrame2[ , !(names(dataFrame2) %in% cols_remove)]
rm(cols_remove)

#Se categoriza las variables 
cols <- c("Directorio","Departamento_Residencia","Cantidad_Hogares_Vivienda","Clase_Vivienda","Tipo_Vivienda","Material_Vivienda","Estrato_Energia_Vivienda","Servicios_Publicos")
dataFrame2[cols] <- lapply(dataFrame2[cols], as.factor)
rm(cols)

```

### Dataframe educación:
```{r}
#Datafame de educación

Educacion<- read.csv2("Datos/Educación.csv")

#Se selecciona las variables que se consideran importantes de dataframe

dataFrame3<-select(Educacion,ï..DIRECTORIO,P6160,P8587)

#Eliminando el dataframe original de educación
rm(Educacion)

#Se renombran las variables

dataFrame3<-rename(dataFrame3,Directorio=ï..DIRECTORIO,Leer_Escribir=P6160,Nivel_Escolaridad=P8587)

#Se eliminan los NA: 
dataFrame3 <- dataFrame3[!is.na(dataFrame3$Directorio),]
dataFrame3 <- dataFrame3[!is.na(dataFrame3$Leer_Escribir),]
dataFrame3 <- dataFrame3[!is.na(dataFrame3$Nivel_Escolaridad),]

#Se categoriza las variables 
cols <- c("Directorio","Leer_Escribir","Nivel_Escolaridad")
dataFrame3[cols] <- lapply(dataFrame3[cols], as.factor)
rm(cols)

```

### Dataframe fuerza de trabajo:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de fuerza de trabajo

Fuerza_Trabajo<- read.csv2("Datos/Fuerza de trabajo.csv")

#Se selecciona las variables que se consideran importantes de dataframe

dataFrame4<-select(Fuerza_Trabajo,ï..DIRECTORIO,P6240,P6435,P6750,P8644)

#Eliminando el dataframe original de fuerza de trabajo
rm(Fuerza_Trabajo)

#Se renombran las variables

dataFrame4<-rename(dataFrame4,Directorio=ï..DIRECTORIO,Tiene_Trabajo=P6240,Tipo_Trabajo=P6435,Ingresos_Anuales=P6750,Subsidio_Sostenimiento_Ninos=P8644)

#Se eliminan los NA
dataFrame4 <- dataFrame4[!is.na(dataFrame4$Directorio),]
dataFrame4 <- dataFrame4[!is.na(dataFrame4$Tiene_Trabajo),]
dataFrame4 <- dataFrame4[!is.na(dataFrame4$Tipo_Trabajo),]
dataFrame4 <- dataFrame4[!is.na(dataFrame4$Ingresos_Anuales),]
dataFrame4 <- dataFrame4[!is.na(dataFrame4$Subsidio_Sostenimiento_Ninos),]


#Se categoriza las variables
cols <- c("Directorio","Tiene_Trabajo","Tipo_Trabajo","Ingresos_Anuales","Subsidio_Sostenimiento_Ninos")
dataFrame4[cols] <- lapply(dataFrame4[cols], as.factor)
rm(cols)

```

### Dataframe de Salud:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de salud
Salud<- read.csv2("Datos/Salud.csv")

#Se selecciona las variables que se consideran importantes de dataframe
dataFrame5<-select(Salud,ï..DIRECTORIO,P6090,P799s2,P799s3,P799s1,P799s4,P799s5,P5672)

#Eliminando el dataframe original de salud
rm(Salud)

#Se renombran las variables

dataFrame5<-rename(dataFrame5,Directorio=ï..DIRECTORIO,Afiliacion_Eps=P6090,Afiliacion_Medicina_Prepagada=P799s2,Afiliacion_Plan_Complementario=P799s3,Afiliacion_Poliza=P799s1,Afiliacion_Seguro_Medico=P799s4,Afiliacion_Otro=P799s5,Embarazo_Hijos=P5672)

#Se eliminan los NA
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Directorio),]
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Afiliacion_Eps),]
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Afiliacion_Medicina_Prepagada),]
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Afiliacion_Plan_Complementario),]
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Afiliacion_Poliza),]
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Afiliacion_Seguro_Medico),]
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Afiliacion_Otro),]
dataFrame5 <- dataFrame5[!is.na(dataFrame5$Embarazo_Hijos),]

dataFrame5 <- mutate(dataFrame5, Id = c(1:nrow(dataFrame5)))

#Se crean categorias para las afiliaciones a salud
dataFrame5<-dataFrame5%>%
              mutate(Afiliacion_Eps=case_when
                                    ((dataFrame5$Afiliacion_Eps==1)~1,
                                    (dataFrame5$Afiliacion_Eps!=1)~0),
                     Afiliacion_Medicina_Prepagada=case_when
                                    ((dataFrame5$Afiliacion_Medicina_Prepagada==1)~1,
                                    (dataFrame5$Afiliacion_Medicina_Prepagada!=1)~0),                                     Afiliacion_Plan_Complementario = case_when
                                    ((dataFrame5$Afiliacion_Plan_Complementario==1)~1,
                                    (dataFrame5$Afiliacion_Plan_Complementario!=1)~0),
                     Afiliacion_Poliza=case_when
                                    ((dataFrame5$Afiliacion_Poliza==1)~1,
                                    (dataFrame5$Afiliacion_Poliza!=1)~0),
                     Afiliacion_Seguro_Medico=case_when
                                    ((dataFrame5$Afiliacion_Seguro_Medico==1)~1,
                                    (dataFrame5$Afiliacion_Seguro_Medico!=1)~0),
                     Afiliacion_Otro=case_when
                                    ((dataFrame5$Afiliacion_Otro==1)~1,
                                      (dataFrame5$Afiliacion_Otro!=1)~0),
                     Embarazo_Hijos=case_when
                                    ((dataFrame5$Embarazo_Hijos==1)~1,
                                    (dataFrame5$Embarazo_Hijos!=1)~0),
                     )

#Se cuentan la cantidad de afiliaciones que tiene la persona                     
df_dates <- dataFrame5 %>%
              group_by(Id) %>%
                summarise(total_Afiliaciones = Afiliacion_Eps + Afiliacion_Medicina_Prepagada + Afiliacion_Plan_Complementario + Afiliacion_Poliza + Afiliacion_Seguro_Medico+Afiliacion_Otro 
                          )
#Se crea un Id para hacer la agrupacion de las afiliaciones
dataFrame5<-merge (dataFrame5, df_dates, by = "Id")
rm(df_dates)
#Se crean categorias para cada uno de los casos de afiliacion
dataFrame5 <- dataFrame5 %>%
              mutate(Afiliacion_Salud=case_when
              ((dataFrame5$Afiliacion_Eps==1 & dataFrame5$total_Afiliaciones==1)~1,
              (dataFrame5$Afiliacion_Medicina_Prepagada==1 & dataFrame5$total_Afiliaciones==1)~2,
              (dataFrame5$Afiliacion_Plan_Complementario==1 & dataFrame5$total_Afiliaciones==1)~3,
              (dataFrame5$Afiliacion_Poliza==1 & dataFrame5$total_Afiliaciones==1)~4,
              (dataFrame5$Afiliacion_Seguro_Medico==1 & dataFrame5$total_Afiliaciones==1)~5,
              (dataFrame5$Afiliacion_Otro==1 & dataFrame5$total_Afiliaciones==1)~6,
              (dataFrame5$total_Afiliaciones==0)~0,
              (dataFrame5$total_Afiliaciones==2)~7,
              (dataFrame5$total_Afiliaciones==3)~8,
              (dataFrame5$total_Afiliaciones==4)~9,
              (dataFrame5$total_Afiliaciones==5)~10,
              (dataFrame5$total_Afiliaciones==6)~11))
#Se eliminan las columnas innecesarias
cols_remove<-c("Id","Afiliacion_Eps","Afiliacion_Medicina_Prepagada","Afiliacion_Plan_Complementario","Afiliacion_Poliza","Afiliacion_Seguro_Medico","Afiliacion_Otro","total_Afiliaciones")
dataFrame5 <- dataFrame5[ , !(names(dataFrame5) %in% cols_remove)]
rm(cols_remove)

#Se categoriza las variables
cols <- c("Directorio","Afiliacion_Salud","Embarazo_Hijos")
dataFrame5[cols] <- lapply(dataFrame5[cols], as.factor)
rm(cols)

```

### Dataframe de Servicios del hogar:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de Servicios del hogar
Servicios_Hogar<- read.csv2("Datos/Servicios del hogar.csv")

#Se selecciona las variables que se consideran importantes de dataframe
dataFrame6<-select(Servicios_Hogar,ï..DIRECTORIO,P5000,P3000,P8526,P5030,P1892S1,P1892S2,P1892S3,P8530,P5069,P764,P8536,P1698S1,I_HOGAR,CANT_PERSONAS_HOGAR)

#Eliminando el dataframe original de Servicios del hogar
rm(Servicios_Hogar)

#Se renombran las variables

dataFrame6<-rename(dataFrame6,Directorio=ï..DIRECTORIO,Cantidad_Habitaciones=P5000,Fuente_Iluminacion=P3000,Servicio_Sanitario=P8526,Uso_Servicio_Sanitario=P5030,Tiene_Lavamanos=P1892S1,Tiene_Lavadero=P1892S2,Tiene_Lavaplatos=P1892S3,Abastecimiento_Agua=P8530,Agua_Consumo=P5069,Lugar_Preparacion_Alimentos=P764,Energia_Combustible=P8536,Tipo_Combustible=P1698S1,Ingreso_Hogar=I_HOGAR,Cantidad_Personas_Hogar=CANT_PERSONAS_HOGAR)

#Se eliminan los NA
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Directorio),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Cantidad_Habitaciones),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Fuente_Iluminacion),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Servicio_Sanitario),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Uso_Servicio_Sanitario),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Abastecimiento_Agua),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Agua_Consumo),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Lugar_Preparacion_Alimentos),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Energia_Combustible),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Tipo_Combustible),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Abastecimiento_Agua),]
dataFrame6 <- dataFrame6[!is.na(dataFrame6$Cantidad_Personas_Hogar),]

dataFrame6 <- mutate(dataFrame6, Id = c(1:nrow(dataFrame6)))

#Se crean categorias para los servicios del hogar 
dataFrame6$Tiene_Lavamanos[is.na(dataFrame6$Tiene_Lavamanos)] <- 0
dataFrame6$Tiene_Lavadero[is.na(dataFrame6$Tiene_Lavadero)] <- 0
dataFrame6$Tiene_Lavaplatos[is.na(dataFrame6$Tiene_Lavaplatos)] <- 0
dataFrame6<-dataFrame6%>%
              mutate(Tiene_Lavamanos=case_when
                                    ((dataFrame6$Tiene_Lavamanos==1)~1,
                                    (dataFrame6$Tiene_Lavamanos!=1)~0),
                     Tiene_Lavadero=case_when
                                    ((dataFrame6$Tiene_Lavadero==1)~1,
                                    (dataFrame6$Tiene_Lavadero!=1)~0),                                                    Tiene_Lavaplatos = case_when
                                    ((dataFrame6$Tiene_Lavaplatos==1)~1,
                                    (dataFrame6$Tiene_Lavaplatos!=1)~0))


#Se cuentan la cantidad de Lavados con los que cuenta el hogar                   
df_dates <- dataFrame6 %>%
              group_by(Id) %>%
                summarise(Cantidad_Lavados = Tiene_Lavamanos + Tiene_Lavadero + Tiene_Lavaplatos)

#Se agrupan por id los data frame
dataFrame6<-merge (dataFrame6, df_dates, by = "Id")
rm(df_dates)

#Se crean categorias para cada los servicios del hogar
dataFrame6 <- dataFrame6 %>%
              mutate(Tiene_Lavados=case_when
              ((dataFrame6$Tiene_Lavamanos==1 & dataFrame6$Cantidad_Lavados==1)~1,
              (dataFrame6$Tiene_Lavadero==1 & dataFrame6$Cantidad_Lavados==1)~2,
              (dataFrame6$Tiene_Lavaplatos==1 & dataFrame6$Cantidad_Lavados==1)~3,
              (dataFrame6$Cantidad_Lavados==0)~0,
              (dataFrame6$Tiene_Lavamanos==1 & dataFrame6$Tiene_Lavadero==1 &                                       dataFrame6$Cantidad_Lavados==2)~4,
              (dataFrame6$Tiene_Lavamanos==1 & dataFrame6$Tiene_Lavaplatos==1 &                                       dataFrame6$Cantidad_Lavados==2)~5,
              (dataFrame6$Tiene_Lavadero==1 & dataFrame6$Tiene_Lavaplatos==1 &                                       dataFrame6$Cantidad_Lavados==2)~6,
              (dataFrame6$Cantidad_Lavados==3)~7))

#Se eliminan las columnas innecesarias
cols_remove<-c("Id","Tiene_Lavamanos","Tiene_Lavadero","Tiene_Lavaplatos","Cantidad_Lavados")
dataFrame6 <- dataFrame6[ , !(names(dataFrame6) %in% cols_remove)]
rm(cols_remove)

#Se categoriza las variables: 
cols <- c("Directorio","Tiene_Lavados","Cantidad_Habitaciones","Fuente_Iluminacion","Servicio_Sanitario","Uso_Servicio_Sanitario","Abastecimiento_Agua","Agua_Consumo","Lugar_Preparacion_Alimentos","Energia_Combustible","Tipo_Combustible","Ingreso_Hogar","Cantidad_Personas_Hogar")
dataFrame6[cols] <- lapply(dataFrame6[cols], as.factor)
rm(cols)

```

### Dataframe de tecnologias de información y comunicación:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de tecnologias de informacion y comunicacion
TEC<- read.csv2("Datos/tecnologías de información y comunicación.csv")

#Se selecciona las variables que se consideran importantes de dataframe
dataFrame7<-select(TEC,ï..DIRECTORIO,P1085S1,P1082S1,P1082S2)

#Eliminando el dataframe original de tecnologias de informacion y comunicacion
rm(TEC)

#Se renombran las variables

dataFrame7<-rename(dataFrame7,Directorio=ï..DIRECTORIO,Internet_Hogar=P1085S1,Tiene_Celular_Convencional=P1082S1,Tiene_Celular_Inteligente=P1082S2)

#Se eliminan los NA
dataFrame7 <- dataFrame7[!is.na(dataFrame7$Directorio),]

dataFrame7 <- mutate(dataFrame7, Id = c(1:nrow(dataFrame7)))

#Se crean categorias para tecnologias de informacion y comunicacion 
dataFrame7$Internet_Hogar[is.na(dataFrame7$Internet_Hogar)] <- 0
dataFrame7$Tiene_Celular_Convencional[is.na(dataFrame7$Tiene_Celular_Convencional)] <- 0
dataFrame7$Tiene_Celular_Inteligente[is.na(dataFrame7$Tiene_Celular_Inteligente)] <- 0
dataFrame7<-dataFrame7%>%
              mutate(Tiene_Celular_Convencional=case_when
                                    ((dataFrame7$Tiene_Celular_Convencional==1)~1,
                                    (dataFrame7$Tiene_Celular_Convencional!=1)~0),
                     Tiene_Celular_Inteligente=case_when
                                    ((dataFrame7$Tiene_Celular_Inteligente==1)~1,
                                    (dataFrame7$Tiene_Celular_Inteligente!=1)~0))


#Se cuentan la cantidad para tecnologias de informacion y comunicacion                    
df_dates <- dataFrame7 %>%
              group_by(Id) %>%
                summarise(Cantidad_Celulares = Tiene_Celular_Convencional + Tiene_Celular_Inteligente)


#Se agrupan por id los data frame
dataFrame7<-merge (dataFrame7, df_dates, by = "Id")
rm(df_dates)


#Se crean categorias para tecnologias de informacion y comunicacion
dataFrame7 <- dataFrame7 %>%
              mutate(Tiene_Celular=case_when
              ((dataFrame7$Tiene_Celular_Convencional==1 & dataFrame7$Cantidad_Celulares==1)~1,
              (dataFrame7$Tiene_Celular_Inteligente==1 & dataFrame7$Cantidad_Celulares==1)~2,
              (dataFrame7$Cantidad_Celulares==0)~0,
              (dataFrame7$Cantidad_Celulares==2)~3))

#Se eliminan las columnas innecesarias
cols_remove<-c("Id","Tiene_Celular_Convencional","Tiene_Celular_Inteligente","Cantidad_Celulares")
dataFrame7 <- dataFrame7[ , !(names(dataFrame7) %in% cols_remove)]
rm(cols_remove)

#Se eliminan los Na's de Tiene celular
dataFrame7 <- dataFrame7[!is.na(dataFrame7$Tiene_Celular),]

#Se categoriza las variables
cols <- c("Directorio","Internet_Hogar","Tiene_Celular")
dataFrame7[cols] <- lapply(dataFrame7[cols], as.factor)
rm(cols)

```

### Dataframe de tenencia y financiación de la vivienda que ocupa en el hogar:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de tenencia y financiación de la vivienda que ocupa en el hogar

TYFVOH<- read.csv2("Datos/Tenencia y financiación de la vivienda que ocupa el hogar.csv")

#Se selecciona las variables que se consideran importantes de dataframe

dataFrame8<-select(TYFVOH,ï..DIRECTORIO,P5095)

#Eliminando el dataframe original de Ttenencia y financiación de la vivienda que ocupa en el hogar
rm(TYFVOH)

#Se renombran las variables

dataFrame8<-rename(dataFrame8,Directorio=ï..DIRECTORIO,Tipo_Vivienda_Ocupa=P5095)

#Se eliminan los NA
dataFrame8 <- dataFrame8[!is.na(dataFrame8$Directorio),]
dataFrame8 <- dataFrame8[!is.na(dataFrame8$Tipo_Vivienda_Ocupa),]


#Se categoriza las variables
cols <- c("Directorio","Tipo_Vivienda_Ocupa")
dataFrame8[cols] <- lapply(dataFrame8[cols], as.factor)
rm(cols)

```

### Dataframe de Uso de energeticos en el hogar:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Datafame de uso de energeticos en el hogar
EH<- read.csv2("Datos/Uso de energéticos del hogar.csv")

#Se selecciona las variables que se consideran importantes de dataframe
dataFrame9<-select(EH,ï..DIRECTORIO,P5510,P5514)

#Eliminando el dataframe original de Uso de energeticos en el hogar
rm(EH)

#Se renombran las variables

dataFrame9<-rename(dataFrame9,Directorio=ï..DIRECTORIO,Uso_Lavadora=P5510,Uso_Nevera=P5514)

#Se eliminan los NA: 
dataFrame9 <- dataFrame9[!is.na(dataFrame9$Directorio),]

#Se crean categorias para uso de energeticos en el hogar
dataFrame9$Uso_Lavadora[is.na(dataFrame9$Uso_Lavadora)] <- 0
dataFrame9$Uso_Nevera[is.na(dataFrame9$Uso_Nevera)] <- 0

dataFrame9<-dataFrame9%>%
              mutate(Uso_Lavadora=case_when
                                    ((dataFrame9$Uso_Lavadora==0)~0,
                                    (dataFrame9$Uso_Lavadora!=0)~1),
                     Uso_Nevera=case_when
                                    ((dataFrame9$Uso_Nevera==0)~0,
                                    (dataFrame9$Uso_Nevera!=0)~1))


#Se categoriza las variables
cols <- c("Directorio","Uso_Lavadora","Uso_Nevera")
dataFrame9[cols] <- lapply(dataFrame9[cols], as.factor)
rm(cols)

```

## Conformación del dataframe final:
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
#Se unen los dataframe de caracteristicas y composición del hogar con condiciones de vida del hogar
df1<-merge (dataFrame1, dataFrame2, by = "Directorio")
rm(dataFrame1)
rm(dataFrame2)

#Se une el dataframe anterior con el de educacion
df2<-merge (df1, dataFrame3, by = "Directorio")
rm(dataFrame3)
rm(df1)

#Se une el dataframe anterior con el de fuerza de trabajo
df3<-merge (df2, dataFrame4, by = "Directorio")
rm(dataFrame4)
rm(df2)

#Se une el dataframe anterior con Salud
df4<-merge (df3, dataFrame5, by = "Directorio")
rm(dataFrame5)
rm(df3)

#Se une el dataframe anterior con Servicios de servicios del hogar
df5<-merge (df4, dataFrame6, by = "Directorio")
rm(dataFrame6)
rm(df4)

#Se une el dataframe anterior con Tecnologias de información y comunicación
df6<-merge (df5, dataFrame7, by = "Directorio")
rm(dataFrame7)
rm(df5)

#Se une el dataframe anterior con tenencia y financiación de la vivienda que ocupa en el hogar
df7<-merge (df6, dataFrame8, by = "Directorio")
rm(dataFrame8)
rm(df6)
#Se une el dataframe anterior con uso energetico en el hogar
df8<-merge (df7, dataFrame9, by = "Directorio")
rm(dataFrame9)
rm(df7)
```

## Creación como archivo CSV
```{r message=FALSE, warning=FALSE, paged.print=TRUE}
write.csv(df8, "Encuesta_Calidad_Vida.csv", row.names = F)
```